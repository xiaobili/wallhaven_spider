# Wallhaven 壁纸爬虫

一个功能强大的Wallhaven壁纸下载工具，支持多种筛选条件和批量下载。

## 功能特性

- 🖼️ 支持按类别爬取壁纸（标签、排行榜、随机、最新）
- ⏰ 时间范围筛选（全部时间、最近一天、三天、一周、一个月、三个月、半年、一年）
- 📐 分辨率筛选（支持自定义分辨率，1080p、1440p、4K、5K、8K等）
- 📥 批量下载，支持多线程
- 🎨 使用Rich库美化命令行输出
- ⚙️ 可配置的下载参数
- 🛡️ 错误处理和中断支持

## 安装依赖

在使用前，请确保安装所需依赖：

```bash
pip install -r requirements.txt
```

需要的依赖包：
- requests
- beautifulsoup4
- rich
- lxml

## 配置文件

程序会读取 `config.json` 文件中的配置，示例配置如下：

```json
{
  "download_dir": "download",
  "delay_between_requests": 0.5,
  "max_pages_per_session": 10,
  "image_formats": ["jpg", "jpeg", "png", "gif", "webp"],
  "max_retries": 3,
  "timeout": 30
}
```

配置说明：
- `download_dir`: 下载目录
- `delay_between_requests`: 请求间隔时间（秒）
- `max_pages_per_session`: 单次会话最大页数
- `image_formats`: 支持的图片格式
- `max_retries`: 最大重试次数
- `timeout`: 请求超时时间

## 使用方法

1. 确保配置文件 `config.json` 存在
2. 运行主程序：

```bash
python wallhaven_spider.py
```

3. 根据菜单提示选择爬取类别
4. 设置时间范围和分辨率筛选条件
5. 选择要爬取的页面范围
6. 确认是否下载找到的壁纸

## 筛选功能

### 时间范围筛选
- 全部时间 (all time)
- 最近一天 (1 day)
- 最近三天 (3 days)
- 最近一周 (1 week)
- 最近一个月 (1 month)
- 最近三个月 (3 months)
- 最近半年 (6 months)
- 最近一年 (1 year)

### 分辨率筛选
- 自定义分辨率 (custom)
- 1920x1080 (1080p)
- 2560x1440 (1440p)
- 3840x2160 (4K)
- 5120x2880 (5K)
- 7680x4320 (8K)
- 不筛选 (no filter)

## 爬取类别

1. **Tag (标签)**: 根据指定标签搜索壁纸
2. **Toplist (排行榜)**: 获取热门壁纸
3. **Random (随机)**: 获取随机壁纸
4. **Latest (最新)**: 获取最新上传的壁纸

## 页面范围选择

- 单页: 爬取指定页码
- 多页: 爬取页码区间
- 所有页: 爬取从起始页开始的所有页面

## 注意事项

- 请遵守Wallhaven的使用条款和robots.txt协议
- 合理设置请求间隔，避免对服务器造成压力
- 请勿用于商业用途，壁纸版权归原作者所有
- 如遇到反爬机制，请适当增加请求间隔时间

## 错误处理

程序具备完善的错误处理机制：
- 网络请求异常处理
- 图片格式验证
- 文件重复下载检测
- 中断信号处理（Ctrl+C）

## 许可证

此项目仅供学习交流使用，请尊重原作者版权。

## 更新日志

### v1.0
- 实现基本爬取功能
- 支持四种爬取类别
- 添加多线程下载
- 使用Rich库美化界面

### v1.1
- 添加时间范围筛选功能
- 添加分辨率筛选功能
- 优化参数配置